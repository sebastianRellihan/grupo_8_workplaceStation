<!DOCTYPE html>
<html lang="es">

<%# Import del HEAD del documento %>
<%- include("../partials/head", {usesBootstrap: false, title: "Workplace Station - Registrate",
    description: "¿Querés formar parte de nuestra plataforma? ¡Tené acceso ilimitado a todos nuestros servicios!",
    keywords: "Workplace Station, formulario, registro, crear cuenta"})%>

<body>
    <%# Import del HADER %>
    <%- include("../partials/header") %>

    <main class="main-form-container register-form-container">

        <div class="form-container">
            <h1> Registro <i class="far fa-id-badge"></i></h1>

            <form class="flex column" action="/users/register" method="POST" enctype="multipart/form-data">
                <!-- Información personal -->
                <label for="name"><span class="asterisk">*</span> Nombre/s:</label>
                <input type="text" class="input-text" name="name" id="name" placeholder="John" autocomplete="true" 
                value="<%= locals.userInput && locals.userInput.name ? locals.userInput.name : '' %>" required>

                <label for="last-name"><span class="asterisk">*</span> Apellido/s:</label>
                <input type="text" class="input-text" name="last-name" id="last-name" placeholder="Wick" autocomplete="true" 
                value="<%= locals.userInput && locals.userInput['last-name'] ? locals.userInput['last-name'] : '' %>" required>

                <label for="email"><span class="asterisk">*</span> Dirección de e-mail:</label>
                <input type="email" class="input-text" name="email" id="email" placeholder="jwick@gmail.com" autocomplete="true" 
                value="<%= locals.userInput && locals.userInput.email ? locals.userInput.email : '' %>" required>

                <label for="user-name"><span class="asterisk">*</span> Nombre de usuario:</label>
                <input type="text" class="input-text" name="user-name" id="user-name" placeholder="boogeyman" autocomplete="true" 
                value="<%= locals.userInput && locals.userInput['user-name'] ? locals.userInput['user-name'] : '' %>" required>

                <label for="password"><span class="asterisk">*</span> Contraseña (mínimo 8 caracteres):</label>
                <input type="password" name="password" id="password" placeholder="********" autocomplete="true" 
                class="input-text <%= locals.errors && errors.confirm ? 'input-alert' : '' %>" required>

                <!--<p class="alert-label" id="password-alert-label">Debe ingresar una contraseña válida</p>-->
                <label for="password-check"><span class="asterisk">*</span> Repetir contraseña:</label>
                <input type="password" name="password-check" id="repeat-password" placeholder="********" autocomplete="true" 
                class="input-text <%= locals.errors && errors.confirm ? 'input-alert' : '' %>" required>
                
                <div class="gender-radio-container flex column">
                    <label for="gender" class="input-label">Género</label>

                    <label class="checkable-container" id="masc-radio">
                        <span>Masculino</span>
                        <input type="radio" name="gender" value="1" <%= locals.userInput && locals.userInput.gender == 1 ? "checked" : "" %>>
                        <span class="custom-checkable"></span>
                    </label>

                    <label class="checkable-container" id="fem-radio">Femenino
                        <input type="radio" name="gender" value="2" <%= locals.userInput && locals.userInput.gender == 2 ? "checked" : "" %>>
                        <span class="custom-checkable"></span>
                    </label>

                    <label class="checkable-container" id="other-radio">Otro
                        <input type="radio" name="gender" value="3" 
                        <%= (locals.userInput && locals.userInput.gender == 3) || !locals.userInput ? "checked" : "" %>>
                        <span class="custom-checkable"></span>
                    </label>
                </div>

                <label for="birth">Fecha de nacimiento:</label>
                <input type="date" class="input-text" name="birth" id="birth" placeholder="dd/mm/aaaa"
                value="<%= locals.userInput && locals.userInput.birth ? locals.userInput.birth : '' %>">
                <!--<p class="alert-label" id="underage-alert-label">¡Debe ser mayor de edad para poder registrarte!</p>-->

                <label for="address">Domicilio:</label>
                <input type="text" class="input-text" name="address" id="address" placeholder="Calle falsa 123, CABA" autocomplete="true" 
                value="<%= locals.userInput && locals.userInput.address ? locals.userInput.address : '' %>">

                <label for="phone-number">Número de teléfono:</label>
                <input type="tel" class="input-text" name="phone-number" id="phone-number" placeholder="+54 9 11 52637400"
                autocomplete="true" value="<%= locals.userInput && locals.userInput['phone-number'] ? locals.userInput['phone-number'] : '' %>">
                <!--<p class="alert-label" id="telnumber-alert-label">Debe ingresar un número válido</p>-->

                <!-- Información de perfil -->
                
                <p id="login-alert" class="alert-label">
                    <%= locals.errors && errors.confirm ? errors.confirm.msg : '' %>
                </p>

                <label class="action-button">
                    <input type="file" name="profile-photo" id="profile-photo">
                    Foto de perfil
                </label>

                <!-- Miscelánea + botones de envío y reseteo -->
                
                <div class="interests-checkbox-container flex column">
                    <label for="interests" class="input-label">Intereses</label>
                    <%# Imprime los checkbox con todas las categorías disponibles %>
                    <% categories.forEach(category => { %>
                        <label class="checkable-container"><%= category.name %>
                            <input type="checkbox" name="interests" value="<%= category.id %>"
                                <%= locals.userInput && userInput.interests && userInput.interests.includes(category.id.toString()) ? "checked" : "" %>>
                            <span class="custom-checkable"></span>
                        </label>
                    <% }); %>
                </div>

                <p class="input-label">
                    Los campos indicados con (<span class="asterisk">*</span>) son obligatorios.
                </p>

                <button type="submit" class="action-button">Enviar</button>
                <button type="reset" class="action-button">Resetear</button>

            </form>

        </div>

    </main>

    <%# Import del footer %>
    <%- include("../partials/footer") %>

</body>

</html>